{% load static %}

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Profil Étudiant</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
</head>
<body>

    <h2>Profil Étudiant</h2>
    <p><strong>Numéro étudiant :</strong> {{ numero_etudiant }}</p>
    {% if is_admin %}
    <p><strong>Statut : </strong> {% if  etudiant.autorise %}Actif{% else %}Bloqué{% endif %}</p>
    <form action="{% url 'toggleBlockStudent' numero_etudiant %}" method="post" style="margin-bottom: 20px;">
        {% csrf_token %}
        <button type="submit" class="block-button">
            {% if  etudiant.autorise %}Bloquer l'étudiant{% else %}Débloquer l'étudiant{% endif %}
        </button>
    </form>
{% endif %}
    <div class="section">
        <h3>Réservations à venir</h3>
        <table>
            <thead>
                <tr>
                    <th class="date-column">Date</th>
                    <th class="creneau-column">Créneau</th>
                    <th class="box-column">Box</th>
                </tr>
            </thead>
            <tbody>
                {% for reservation in reservations_a_venir %}
                <tr>
                    <td class="date-column">{{ reservation.date_field|date:"l, d F Y" }}</td>
                    <td class="creneau-column">{{ reservation.creneau.heure_debut|date:"H:i" }} - {{ reservation.creneau.heure_fin|date:"H:i" }}</td>
                    <td class="box-column">{{ reservation.box_id }}</td>
                </tr>
                {% endfor %}
                {% if reservations_a_venir|length == 0 %}
                <tr>
                    <td colspan="3">Aucune réservation à venir.</td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </div>

    <div class="section">
        <h3>Réservations passées</h3>
        <table>
            <thead>
                <tr>
                    <th class="date-column">Date</th>
                    <th class="creneau-column">Créneau</th>
                    <th class="box-column">Box</th>
                </tr>
            </thead>
            <tbody>
                {% for reservation in reservations_passees %}
                <tr>
                    <td class="date-column">{{ reservation.date_field|date:"l, d F Y" }}</td>
                    <td class="creneau-column">{{ reservation.creneau.heure_debut|date:"H:i" }} - {{ reservation.creneau.heure_fin|date:"H:i" }}</td>
                    <td class="box-column">{{ reservation.box_id }}</td>
                </tr>
                {% endfor %}
                {% if reservations_passees|length == 0 %}
                <tr>
                    <td colspan="3">Aucune réservation passée.</td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
{% if is_admin %}
    <a href="{% url 'profilAdmin'%}" class="back-button">Retour</a>
{% else %}
    <a href="{% url 'vueCalendrier'%}" class="back-button">Retour</a>

{% endif %}
</body>
</html>
